import{d as b,k as v,r as p,c as x,e as u,b as e,l as m,v as f,i as w,f as y,u as k,F as C,h as L,R as B,p as E,j as I}from"./index-FGR3vbBp.js";import{N as R,_ as V}from"./NavbarComponent-RTQflMgb.js";import{p as N,S as t,a as P,b as S}from"./sweetalert2.all-N-XHufSx.js";const i=n=>(E("data-v-d86e6f23"),n=n(),I(),n),q={class:"text-white"},D={class:"row g-0",style:{height:"calc(100dvh - 120px)"}},F=i(()=>e("div",{class:"col-6 d-none d-lg-block"},[e("div",{class:"login-bg"})],-1)),O={class:"col-12 col-lg-6 bg-dark d-flex justify-content-center align-items-center title-deco-bg-line"},T={class:"w-75 p-5"},j=i(()=>e("span",{class:"text-primary mb-2 fs-6"}," 享樂酒店，誠摯歡迎 ",-1)),z=i(()=>e("h2",{class:"mb-4 fw-bold",style:{"font-size":"32px"}},"立即開始旅程",-1)),A={class:"mb-3"},U=i(()=>e("label",{for:"email",class:"form-label"}," 電子信箱 ",-1)),G={class:"mb-3"},M=i(()=>e("label",{for:"password",class:"form-label"}," 密碼 ",-1)),H=b({__name:"LoginView",setup(n){const h=v(),l=p({email:"",password:""}),r=p(""),_=()=>{N(l.value).then(({data:o})=>{t.fire({title:"登入成功",text:"開始挑選喜歡的房型吧",icon:"success"}).then(()=>{localStorage.setItem("token",o.token),h.push("/")})}).catch(o=>{t.fire({title:"登入失敗",text:o.response.data.message,icon:"error"})})},g=o=>{o.preventDefault(),t.fire({title:"請輸入您的Email",input:"text",inputAttributes:{autocapitalize:"off"},confirmButtonText:"送出",showLoaderOnConfirm:!0,preConfirm:async s=>{r.value=s,P(s).then(()=>{t.fire({title:"已將驗證信發送到您的信箱",text:"請設定新密碼",icon:"success",preConfirm:()=>{c()}})}).catch(a=>{t.fire({title:"驗證失敗，請確認Email",text:a.response.data.message,icon:"error"})})},allowOutsideClick:()=>!t.isLoading()})},c=()=>{t.fire({title:"請輸入新密碼及驗證碼",html:`
    <label for="swal-input1">請輸入驗證碼</label>
    <input id="swal-input1" class="swal2-input">
    <label for="swal-input2">請輸入新密碼</label>
    <input id="swal-input2" class="swal2-input" type="password">
  `,inputAttributes:{autocapitalize:"off"},confirmButtonText:"送出",showLoaderOnConfirm:!0,preConfirm:()=>{const o=document.getElementById("swal-input1"),s=document.getElementById("swal-input2"),a={email:r.value,code:o.value,newPassword:s.value};S(a).then(()=>{t.fire({title:"密碼重設成功",text:"請使用新密碼登入",icon:"success"})}).catch(d=>{console.log(d.response),t.fire({title:"密碼重設失敗",text:d.response.data.message,icon:"error",preConfirm:()=>{c()}})})},allowOutsideClick:()=>!t.isLoading()})};return(o,s)=>(L(),x(C,null,[u(R),e("div",q,[e("div",D,[F,e("div",O,[e("form",T,[j,z,e("div",A,[U,m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>l.value.email=a),type:"email",class:"form-control mb-3",id:"email",placeholder:"hello@exsample.com",required:""},null,512),[[f,l.value.email]])]),e("div",G,[M,m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>l.value.password=a),type:"password",class:"form-control",id:"password",placeholder:"請輸入密碼",required:""},null,512),[[f,l.value.password]])]),e("div",{class:"mb-5 form-check d-flex justify-content-end align-items-center"},[e("a",{href:"#",class:"text-primary",onClick:g}," 忘記密碼? ")]),e("button",{type:"submit",class:"btn w-100 p-3 mb-5 light-btn",onClick:_}," 會員登入 "),e("p",null,[w(" 沒有會員嗎? "),u(k(B),{to:"/register",class:"text-primary"},{default:y(()=>[w(" 前往註冊 ")]),_:1})])])])])])],64))}}),W=V(H,[["__scopeId","data-v-d86e6f23"]]);export{W as default};
